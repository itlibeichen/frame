var uploadPreview=function(a){var c,d,e,b=this;b.IsNull=function(a){return"function"==typeof a?!1:void 0==a||null==a||""==a||0==a.length?!0:!1},b.DefautlSetting={UpBtn:"",DivShow:"",ImgShow:"",Width:100,Height:100,ImgType:["gif","jpeg","jpg","bmp","png"],ErrMsg:"选择文件错误,图片类型必须是(gif,jpeg,jpg,bmp,png)中的一种",callback:function(){}},b.Setting={UpBtn:b.IsNull(a.UpBtn)?b.DefautlSetting.UpBtn:a.UpBtn,DivShow:b.IsNull(a.DivShow)?b.DefautlSetting.DivShow:a.DivShow,ImgShow:b.IsNull(a.ImgShow)?b.DefautlSetting.ImgShow:a.ImgShow,Width:b.IsNull(a.Width)?b.DefautlSetting.Width:a.Width,Height:b.IsNull(a.Height)?b.DefautlSetting.Height:a.Height,ImgType:b.IsNull(a.ImgType)?b.DefautlSetting.ImgType:a.ImgType,ErrMsg:b.IsNull(a.ErrMsg)?b.DefautlSetting.ErrMsg:a.ErrMsg,callback:b.IsNull(a.callback)?b.DefautlSetting.callback:a.callback},c=b.Setting.DivShow,d="."+b.Setting.ImgShow,e=document.getElementById("BtnInput"+c),$(e).on("click",function(){$("input",$(this).prev()).last()[0].click()}),b.getObjectURL=function(a){var b=null;return void 0!=window.createObjectURL?b=window.createObjectURL(a):void 0!=window.URL?b=window.URL.createObjectURL(a):void 0!=window.webkitURL&&(b=window.webkitURL.createObjectURL(a)),b},b.Bind=function(){function a(){var e,f,g,h,j,k;if($("#"+c+" .imgShow"+c).length>=5)return $input='<input name="ImagePathUp0" class="UpSty1" type="file">',$("#"+c).append($input),alert("最多上传5张图片"),$(this).remove(),$("#"+c+" input").last()[0].onchange=a,void 0;if(this.value){if(!RegExp(".("+b.Setting.ImgType.join("|")+")$","i").test(this.value.toLowerCase()))return alert(b.Setting.ErrMsg),this.value="",!1;if(e=b.Setting.ImgShow,f=null,f=window.navigator.userAgent.indexOf("MSIE")>-1?document.createElement("p"):document.createElement("img"),f.className=e,g=document.getElementById(c),g.appendChild(f),h=document.createElement("input"),h.type="file",h.className="UpSty1",h.name="ImagePath"+c,h.onchange=a,g.appendChild(h),navigator.userAgent.indexOf("MSIE")>-1)try{$(d)[parseInt($(d).length)].src=b.getObjectURL(this.files[0]),alert(1)}catch(i){j=$("."+e).last()[0],this.select(),top.parent.document.body.focus(),k=document.selection.createRange().text,document.selection.empty(),j.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale)",j.style.width=b.Setting.Width+"px",j.style.height=b.Setting.Height+"px";try{j.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=k}catch(i){return alert("该图片无法上传，请更换图片后上传"),$(j).prev().remove(),$(j).remove(),void 0}}else $("."+e)[$(d).length-1].src=b.getObjectURL(this.files[0]);b.Setting.callback(),f.onclick=function(){$(this).prev().remove(),$(this).remove()}}}$("input",$(e).prev()).last()[0].onchange=a},b.Bind()};